# hw45

1*List all of the annotations you learned from class and homework to*
*annotaitons.md*
*2. What is HTTP Session?*

HTTP session consists of three phases:

1. the client establishes a TCP connection, (or the appropriate connection if the transport layer is not TCP).
2. The client sends its request and waits for the answer
3. The server processes the request, sending back its answer, providing a status code and appropriate data.

*3. What is Cookie?*

Cookies are client-side files on a local computer that hold user information. Sessions are server-side files that contain user data. Cookies end on the lifetime set by the user. When the user quits the browser or logs out of the programmed, the session is over.

*4. What is the difference between Session and Cookie?*

Cookies and Sessions are used to store information. Cookies are only stored on the client-side machine, while sessions get stored on the client as well as the server.

| Basis of Comparison | Cookie | Session |
| --- | --- | --- |
| Definition | Cookies are client-side files that are stored on a local computer and contain user information. | Sessions are server-side files that store user information. |
| Expiry | Cookies expire after the user specified lifetime. | The session ends when the user closes the browser or logs out of the program. |
| Data storage | It can only store a limited amount of data. | It is able to store an unlimited amount of information. |
| Capacity | Cookies can only store up to a maximum of 4 KB of data in a browser. | There is a maximum memory restriction of 128 megabytes that a script may consume at one time. However, we are free to maintain as much data as we like within a session. |
| Function | It is not necessary for us to execute a function in order to get cookies going because they are stored on the local computer. | Utilizing the session start()method is required before we can begin the session. |
| Data Format | Cookies are used to store information in a text file. | The data is saved in an encrypted format during sessions. |
| Storage | Cookies are stored on a limited amount of data. | A session can store an unlimited amount of data. |

*5. How do we use session and cookie to keep user information across the the*
*application?*

Session variables, which can be of any sort, are where the user's data can be saved if they are chosen to do so. The data that is stored by session variables is either encrypted or converted to a binary form on the server, which protects the data from being accessed by a third party

When the user of the application logs out of that application or closes down their computer, the session value is automatically detached. It is necessary for the session values to be saved in the database if they are to be retained for a longer period of time. Every single session is unique to the individual user, and there is no limit to the number of sessions that can be used within a single application because there are no constraints placed on it. A user can be recognized with the assistance of a session, which is a one-of-a-kind number that is kept on the server in the form of a cookie, a form field, or a URL

The Session ID, which is a one-of-a-kind number that is temporarily stored on the server, is what is used to identify the user. It is either a cookie, a form field, or a URL that is saved.

 n a user opens a site, these cookies maintain track of all of the activities and surfing they do on the site. The information is saved using the string type. The information that is gathered by cookies is not considered to be secure because the information is kept in texts that are simple to read and understand. The users have the ability to control whether the cookies are enabled or disabled at any time they see fit. Only the user who initially created a cookie has access to the cookie's information; no other users can see it. Cookies are created with the help of an HTTP header and then transferred between the browser and the server. Cookies are saved in the Temporal Internet File Folder by Internet Explorer, but the location where they are saved is determined by the browser being used. Cookies read the data that is generated when we search for and play certain songs on YouTube. Then, the next time that we open YouTube, the same songs or recommendations that are similar to them are displayed.

*6. What is the spring security filter?*

The Spring Security filter contains a list of filter chains and dispatches a request to the first chain that matches it. Spring Security maintains a filter chain internally where each of the filters has a particular responsibility and filters are added or removed from the configuration depending on which services are required. The ordering of the filters is important as there are dependencies between them. If you have been using namespace configuration then the filters are automatically configured for you and you don't have to define any Spring beans explicitly but here may be times when you want full control over the security filter chain, either because you are using features which aren't supported in the namespace, or you are using your own customized versions of classes.

*7. Do you use any Encoder to encode Password?*

```java
@Configuration
public class InMemoryAuthWebSecurityConfigurer {

@Bean
public InMemoryUserDetailsManager userDetailsService() {
        PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();
        UserDetails user = User.withUsername("spring")
            .password(encoder.encode("secret"))
            .roles("USER")
            .build();
        return new InMemoryUserDetailsManager(user);
    }
}
```

*8. What is UserDetailService? AuthenticationProvider?AuthenticationManager?*
*AuthenticationFilter?(把这⼏个名字看熟悉也⾏)*

       The *UserDetailsService* interface is used to retrieve user-related data. It has one method named *loadUserByUsername()* which can be overridden to customize the process of finding the user. It is used by the *DaoAuthenticationProvider* to load details about the user during authentication.

    AuthenticationManger是一个接口，用来完成认证的逻辑，开发者可按照自己的项目设计需求进行实现。如果，我们希望能够组合使用多种认证服务，比如基于数据库和LDAP服务器的认证服务，Spring Security也是支持的。

    ProviderManager是Spring Security提供的一个实现，但是它本身不处理认证请求，而是将任务委托给一个配置好的AuthenticationProvider的列表，其中每一个AuthenticationProvider按序确认能否完成认证，每个provider如果认证失败，会抛出一个异常，如果认证通过，则会返回一个Authentication对象。

    AuthenticationProvider也是一个接口，用来完成具体的认证逻辑。不同的认证方式有不同的实现，Spring Security中提供了多种实现，包括DaoAuthenticationProvider, AnonymousAuthenticationProvider 和 LdapAuthenticationProvider等。 

*9. What is the disadvantage of Session? how to overcome the disadvantage?*

The disadvantage of Session : 1. variables and cookies are synonymous. So if a user has set his browser not to accept any cookies, your Session variables won't work for that particular web   2. Performance overhead in case of large number of user, because of session data stored in server memory. 3. Overhead involved in serializing and De-Serializing session data because in case of StateServer and SQLServer session mode we need to serialize the object before store.

*10. What is JWT?*

   JSON Web Token (JWT) is a compact URL-safe means of representing claims to be transferred between two parties.This is the most common scenario for using JWT. Once the user is logged in, each subsequent request will include the JWT, allowing the user to access resources that are
permitted with that token. Single Sign On is a feature that widely uses JWT nowadays.

*11. describe how do JWT work(slides ⾥有图，†26页)*

Step 1: Adding JWT Dependency
Step 2: Create JwtAuthenticationEntryPoint
Step 3: Add jwtproperties in application.propertiesfile
Step 4: Create JwtTokenProvider
Step 5: JwtAuthenticationFilter
Step 6: Create JWTAuthResponseDTO
Step 7: Configure JWT in Spring Security Configuration
Step 8: Change login/signinAPI to return token to client

*12. how to get value from application.properties?*

Use the `@Value` annotation and access the property in whichever Spring bean you're using

```
@Value("${userBucket.path}")
private String userBucketPath;
```

Another way is injecting `org.springframework.core.env.Environment` to your bean.

```
@Autowired
private Environment env;
....

public void method() {
    .....
    String path = env.getProperty("userBucket.path");
    .....
}
```

*13. What is the role of configure(HttpSecurity http) and configure(AuthenticationManagerBuilder auth)?*

To enable HTTP Security in Spring, we need to extend the *WebSecurityConfigurerAdapter* to provide a default configuration in the *configure(HttpSecurity http)* method:

```java
protectedvoidconfigure(HttpSecurity http)throws Exception {
    http.authorizeRequests()
      .anyRequest().authenticated()
      .and().httpBasic();
}
```

The above default configuration makes sure any request to the application is authenticated with form based login or HTTP basic authentication.

Another way to configure: 

in-memory configuration:

```java
@Autowired
publicvoidconfigureGlobal(AuthenticationManagerBuilder auth)
throws Exception {
    auth.inMemoryAuthentication()
      .withUser("user").password(passwordEncoder().encode("password")).roles("USER")
      .and()
      .withUser("admin").password(passwordEncoder().encode("password")).roles("USER", "ADMIN");
}

```

*14. What is Spring security authentication and authorization?*

    Authentication and authorization are two vital information security processes that administrators use to protect systems and information. Authentication verifies the identity of a user or service, and authorization determines their access rights. Authorization is the security process that determines a user or service's level of access. In technology, we use authorization to give users or services permission to access some data or perform a particular action. 

*15. Reading, 泛读⼀下即可，⾃⼰觉得是重点的，可以多看两眼。https://www.intervi*
*ewbit.com/spring-security-interview-questions/#is-security-a-cross-cutting-con*
*cern*
 **