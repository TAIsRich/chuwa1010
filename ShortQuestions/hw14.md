## HW14 - Spring Security


##### 1.List all of the annotations you learned from class and homework to annotaitons.md

##### 2.What is HTTP Session?

Session is used to store data on the server and it can be utilized across various pages of the website. It represents the amount of time a user spends on an activity. The session begins when the user logs in or access the application and exits when the user logs out or the timeout value (30 mins) is reached.

##### 3.What is Cookie?

Cookie is a small text file which is saved on the userâ€™s computer. Cookies contain user's information and enable websites to retrieve the information during the user's visit. 

##### 4.What is the difference between Session and Cookie?

- Session: stored in back-end, has expiration time (30 mins), store unlimited data, secure (store data in encrypted form)
- Cookie: stored in front-end, expire after the specified lifetime, store limited data, not secure (store data in text file)

##### 5.How do we use session and cookie to keep user information across the the application?

Cookies can be set by server using the HTTP header. Cookies hold data in a key-value pairs and are stored in user's computer. Servers use cookies to identify the user and provide personalized contents.

Session is tracked by the session ID which can be stored as cookie and this cookie will be sent to server each time the user sends a HTTP request.

##### 6.What is the spring security filter?

https://spring.io/guides/topicals/spring-security-architecture

https://www.javadevjournal.com/spring-security/spring-security-filters/

The security filter is used to provide security features to the application by intercepting http requests. In the architecture, the spring security can be seen as a servlet filter, which its type is `FilterChainProxy`, and it is delegated by the `DelegatingFilterProxy` layer. Inside this 'single filter', there are a series of filters, each has a particular responsibility, create the **spring security filters chain**. 

Some security filters:

`UsernamePasswordAuthenticationFilter`, `ConcurrentSessionFilter`, `SecurityContextPersistenceFilter`, `DefaultLoginPageGeneratingFilter` 

##### 7.Do you use any Encoder to encode Password?

Using the `BCryptPasswordEncoder` to encode and store the password securely. It implements `PasswordEncoder` in Spring and uses the BCrypt hashing function. 

`encode()`: encode the raw password

`matches()`: compare the encoded password in storage with the submitted raw password

##### 8.What is `UserDetailService`? `AuthenticationProvider`?`AuthenticationManager`? `AuthenticationFilter`?

https://www.javainuse.com/webseries/spring-security-jwt/chap3

`AuthenticationFilter`: response for spring security, has particular responsibility

`AuthenticationManager`: an interface and implemented by `ProviderManager` which delegates a list of `AuthenticationProvider`s 

`AuthenticationProvider`: an interface with a single authenticate method, it authenticates the input **authentication object** with the **user object** that fetched by `UserDetailService`

`UserDetailService`: an interface with a single method named `loadUserByUsername()`, it is used to fetch the **user object** based on the username

*For the manager and provider, the input is Authentication Object with **Credentials** while the output is Authentication Object with **Principal**

##### 9.What is the disadvantage of Session? how to overcome the disadvantage?

- Disadvantage: multiple servers, the request could be redirected to different server by the load balancer

- Solutions:
  - sticky session feature: the load balancer remembers the user and its initial server
  - shared session cache: e.g. redis
  - JWT

##### 10.What is JWT?

Jason Web Token. The token is generated by the server upon user authentication and then sent back to the user. It is sent with every HTTP request and used for authorizing requests between user and server. It is a json object contains three parts: header, payload, and signature.

##### 11.Describe how do JWT work

- user logs in and the sever do the authentication, once successful the JWT is generated and sent back to the user
- user inserts the JWT into the Authorization header at each http request
- the server validates the JWT and returns the response

##### 12.how to get value from application.properties?

https://stackoverflow.com/questions/30528255/how-to-access-a-value-defined-in-the-application-properties-file-in-spring-boot

- `@Value("${<property.name>}")`
- `@PropertySource("classpath:application.properties")`
- `@ConfigurationProperties(prefix = "property.all")`

##### 13.What is the role of `configure(HttpSecurity http)` and `configure(AuthenticationManagerBuilder auth)`?

https://medium.com/@er.rameshkatiyar/configure-spring-security-in-your-application-ae303fa78959

- `configure(HttpSecurity http)`

  This method creates a `HttpSecurity` object which allows us to implement the **authorization**.

- `configure(AuthenticationManagerBuilder auth)`

  This method creates an object of `AuthenticationManagerBuilder` which allows us to configure the security information for user authentication. The main security information includes **authentication** type (in-memory, ldap, jdbc) and user details.

##### 14.What is Spring security authentication and authorization?

- Authentication: verifies the identity of the user, such as the login feature for authenticating the user

- Authorization: ensures the user can only access the parts of a resource which they are authorized to access
